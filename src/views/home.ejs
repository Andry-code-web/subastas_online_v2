<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- FAVICON -->
  <link rel="shortcut icon" href="/img/footer_logo.svg" type="image/x-icon">
  <!-- BOOTSTRAP -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <!-- BOOSTRAP SCRIPT -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
  <!-- BOOTSSTRAP ICON -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <!-- ESTILOS -->
  <link rel="stylesheet" href="/css/style_home.css">
  <title>Subasta Sur</title>
</head>

<body>
  <!-- CABEZERA -->
  <header>
    <div class="logo"><img src="/img/SUBASTA-SUR-COLOR-ROJO-SIN-FONDO.png" alt=""></div>
    <nav>
      <a href="/">Inicio</a>
      <a href="/catalogo">Catalogo</a>
      <a href="/admin/LoginAdminV">Vender</a>
    </nav>
    <div class="session">
      <% if (usuario) { %>
        <p class="d-flex align-items-center ">
          <span>
            <%= usuario.nombre %>
          </span>
          <button class="btn_menu ms-1" id="btn_menu">
            <i class="bi bi-list"></i>
          </button>
        <div class="menu_desplegable d-flex flex-column justify-content-between">
          <div>
            <div class="cabezera_menu d-flex justify-content-between">
              <h3>Subastas</h3>
              <button id="btn_close">
                <i class="bi bi-x-lg"></i>
              </button>
            </div>
            <ul>
              <li><a href="#">Me gusta</a></li>
            </ul>
          </div>
          <div class="perfil_user">
            <div class="d-flex flex-row">
              <i class="bi bi-person-bounding-box" style="font-size: 2.5rem; color: #fff; margin-right: 1rem;"></i>
              <div class="d-flex flex-column">
                <strong>Cliente</strong>
                <small>
                  <%= usuario.nombre %>
                </small>
                <a href="/logout" class="btn btn-danger btn-sm ms-2">Cerrar Sesión</a>
              </div>
            </div>
          </div>
          <% } else { %>
            <p class="ingresar">
              <span>
                <i class="bi bi-person"></i>
              </span>
              <span>
                <a href="/login">Ingresar</a>
              </span>
            </p>
            <% } %>
        </div>
    </div>
  </header>

  <!-- BANNER -->
  <section class="banner" id="banner">
    <div id="carouselExampleInterval" class="carousel slide" data-bs-ride="carousel">
      <div class="carousel-inner">
        <div class="carousel-item active" data-bs-interval="2000">
          <img src="/img/banner_slider1_v2.jpeg" class="d-block w-100" alt="...">
        </div>
        <div class="carousel-item" data-bs-interval="2000">
          <img src="/img/banner_slider2_v2.jpeg" class="d-block w-100" alt="...">
        </div>
        <div class="carousel-item">
          <img src="/img/banner_slider3_v2.jpeg" class="d-block w-100" alt="...">
        </div>
        <div class="carousel-item">
          <img src="/img/banner_slider4_v2.jpeg" class="d-block w-100" alt="...">
        </div>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleInterval"
        data-bs-slide="prev">
        <span class="carousel-icon" aria-hidden="true">
          <i class="bi bi-chevron-left"></i>
        </span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleInterval"
        data-bs-slide="next">
        <span class="carousel-next-icon" aria-hidden="true">
          <i class="bi bi-chevron-right"></i>
        </span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>

    <!-- <div class="contenido">
      <h1>Invierte en tu futuro con nuestras subastas de inmuebles.</h1>
      <a href="#contacto">Contáctenos</a>
    </div> -->

  </section>

  <!-- CATEGORÍAS -->
  <section class="categoria" id="cartegoria">
    <h2>Navega por las categorías</h2>
    <div class="categorias d-flex flex-row">
      <a href="/catalogo?categoria=camioneta" class="content_img">
        <div class="iconos_cuentas">
          <span class="icono">
            <img src="/img/icon_camioneta.png" alt="">
          </span>
          <span class="contador">
            <%= cantidades.camioneta %>
          </span>
        </div>
        <span>
          Camionetas
        </span>
      </a>
      <a href="/catalogo?categoria=auto" class="content_img">
        <div class="iconos_cuentas">
          <span class="icono">
            <img src="/img/icon_auto.png" alt="">
          </span>
          <span class="contador">
            <%= cantidades.auto %>
          </span>
        </div>
        <span>
          Autos
        </span>
      </a>
      <a href="/catalogo?categoria=moto" class="content_img">
        <div class="iconos_cuentas">
          <span class="icono">
            <img src="/img/icon_moto.png" alt="">
          </span>
          <span class="contador">
            <%= cantidades.moto %>
          </span>
        </div>
        <span>
          Motos
        </span>
      </a>
      <a href="/catalogo" class="content_img d-flex justify-content-between">
        <div class="iconos_cuentas" style="margin-top: 7px; ">
          <span class="icono piezas">
            <img src="/img/icon_accesorios.png" alt="">
          </span>
          <% if(cantidades.piezas>= 1) { %>
            <span class="contador piesas">
              <%= cantidades.piezas %>
            </span>
            <% } else { %>
              <span class="contador piesas">0</span>
              <% } %>
        </div>
        <span>
          Piezas
        </span>
      </a>
    </div>
  </section>

  <!-- ABOUT -->
  <!-- <section class="about" id="about">
    <div class="image_social">
      <img src="/img/about.svg" alt="">
      <div class="social">
        <a href="">
          <img class="face" src="/img/face.svg" alt="">
        </a>
        <a href="">
          <img class="you" src="/img/youtube.svg" alt="">
        </a>
        <a href="">
          <img class="mail" src="/img/mail.svg" alt="">
        </a>
      </div>
    </div>
    <div class="info">
      <h2>Urbaniza Club</h2>
      <p>
        Lorem ipsum dolor sit amet consectetur. Pellentesque tincidunt
        id mauris tellus feugiat gravida pulvinar viverra lacus. Vitae
        et scelerisque nunc cursus venenatis praesent sit lorem. Fermentum
        mi ligula tempus tristique lobortis aenean. Blandit risus ut id turpis.
        Vitae id vel suscipit felis. Morbi turpis diam in odio. Lorem nulla sodales
        etiam arcu elit. Convallis commodo nibh sed montes augue.
      </p>
      <div class="btn_about">
        <a href="#contacto">Contáctenos</a>
      </div>
    </div>
  </section> -->

  <!-- SUBASTAS MAS LIKEADAS -->
  <section class="subastas">
    <!-- Camionetas -->
    <div class="contenedor_subastass">
      <h2>Camionetas</h2>
      <div class="content_card">
        <% camionetas.forEach(subasta=> { %>
          <div class="card_home">

            <div class="card-img">
              <% if (subasta.imagenes && subasta.imagenes.length> 0) { %>
                <img src="data:image/jpeg;base64,<%= subasta.imagenes[0] %>" alt="Subasta Image">
                <% }else { %>
                  <img src="/img/casa.png" alt="Default Image">
                  <% } %>
            </div>
            <div class="card-info d-flex justify-content-between">
              <div class="informacion">
                <p class="info text-title">
                  <%= subasta.marca %>
                </p>
                <p class="info text-body">
                  <%= subasta.categoria %>
                </p>
                <p class="text-model">
                  Modelo: <%= subasta.modelo %>
                </p>
              </div>
              <div class="comment-react">
                <div class="like">
                  <svg fill="none" viewBox="0 0 24 24" height="16" width="16" xmlns="http://www.w3.org/2000/svg">
                    <path fill="#f5356e" stroke-linecap="round" stroke-width="2" stroke="none"
                      d="M19.4626 3.99415C16.7809 2.34923 14.4404 3.01211 13.0344 4.06801C12.4578 4.50096 12.1696 4.71743 12 4.71743C11.8304 4.71743 11.5422 4.50096 10.9656 4.06801C9.55962 3.01211 7.21909 2.34923 4.53744 3.99415C1.01807 6.15294 0.221721 13.2749 8.33953 19.2834C9.88572 20.4278 10.6588 21 12 21C13.3412 21 14.1143 20.4278 15.6605 19.2834C23.7783 13.2749 22.9819 6.15294 19.4626 3.99415Z">
                    </path>
                  </svg>
                </div>
                <hr>
                <span>
                  <%= subasta.like_count %>
                </span>
              </div>
            </div>
            <div class="card-footer">
              <span class="text-title">
                $<%= subasta.precio_base %>
              </span>
              <div class="card-button">
                <a href="/subasta/<%= subasta.id %>" class="button">
                  <span class="button-text">Detalles</span>
                </a>
              </div>
            </div>

          </div>
          <% }) %>
      </div>

    </div>

    <!-- Autos -->
    <div class="contenedor_subastass">
      <h2>Autos</h2>
      <div class="content_card">
        <% autos.forEach(subasta=> { %>
          <div class="card_home">
            <div class="card-img">
              <% if (subasta.imagenes && subasta.imagenes.length> 0) { %>
                <img src="data:image/jpeg;base64,<%= subasta.imagenes[0] %>" alt="Subasta Image">
                <% }else { %>
                  <img src="/img/casa.png" alt="Default Image">
                  <% } %>
            </div>
            <div class="card-info d-flex justify-content-between">
              <div class="informacion">
                <p class="info text-title">
                  <%= subasta.marca %>
                </p>
                <p class="info text-body">
                  <%= subasta.categoria %>
                </p>
                <p class="text-model">
                  Modelo: <%= subasta.modelo %>
                </p>
              </div>
              <div class="comment-react">
                <div class="like">
                  <svg fill="none" viewBox="0 0 24 24" height="16" width="16" xmlns="http://www.w3.org/2000/svg">
                    <path fill="#f5356e" stroke-linecap="round" stroke-width="2" stroke="none"
                      d="M19.4626 3.99415C16.7809 2.34923 14.4404 3.01211 13.0344 4.06801C12.4578 4.50096 12.1696 4.71743 12 4.71743C11.8304 4.71743 11.5422 4.50096 10.9656 4.06801C9.55962 3.01211 7.21909 2.34923 4.53744 3.99415C1.01807 6.15294 0.221721 13.2749 8.33953 19.2834C9.88572 20.4278 10.6588 21 12 21C13.3412 21 14.1143 20.4278 15.6605 19.2834C23.7783 13.2749 22.9819 6.15294 19.4626 3.99415Z">
                    </path>
                  </svg>
                </div>
                <hr>
                <span>
                  <%= subasta.like_count %>
                </span>
              </div>
            </div>
            <div class="card-footer">
              <span class="text-title">
                $<%= subasta.precio_base %>
              </span>
              <div class="card-button">
                <a href="/subasta/<%= subasta.id %>" class="button">
                  <span class="button-text">Detalles</span>
                </a>
              </div>
            </div>

          </div>
          <% }) %>
      </div>

    </div>

    <!-- Motos -->
    <div class="contenedor_subastass">
      <h2>Motos</h2>
      <div class="content_card">
        <% motos.forEach(subasta=> { %>
          <div class="card_home">
            <div class="card-img">
              <% if (subasta.imagenes && subasta.imagenes.length> 0) { %>
                <img src="data:image/jpeg;base64,<%= subasta.imagenes[0] %>" alt="Subasta Image">
                <% }else { %>
                  <img src="/img/casa.png" alt="Default Image">
                  <% } %>
            </div>
            <div class="card-info d-flex justify-content-between">
              <div class="informacion">
                <p class="info text-title">
                  <%= subasta.marca %>
                </p>
                <p class="info text-body">
                  <%= subasta.categoria %>
                </p>
                <p class="text-model">
                  Modelo: <%= subasta.modelo %>
                </p>
              </div>
              <div class="comment-react">
                <div class="like">
                  <svg fill="none" viewBox="0 0 24 24" height="16" width="16" xmlns="http://www.w3.org/2000/svg">
                    <path fill="#f5356e" stroke-linecap="round" stroke-width="2" stroke="none"
                      d="M19.4626 3.99415C16.7809 2.34923 14.4404 3.01211 13.0344 4.06801C12.4578 4.50096 12.1696 4.71743 12 4.71743C11.8304 4.71743 11.5422 4.50096 10.9656 4.06801C9.55962 3.01211 7.21909 2.34923 4.53744 3.99415C1.01807 6.15294 0.221721 13.2749 8.33953 19.2834C9.88572 20.4278 10.6588 21 12 21C13.3412 21 14.1143 20.4278 15.6605 19.2834C23.7783 13.2749 22.9819 6.15294 19.4626 3.99415Z">
                    </path>
                  </svg>
                </div>
                <hr>
                <span>
                  <%= subasta.like_count %>
                </span>
              </div>
            </div>
            <div class="card-footer">
              <span class="text-title">
                $<%= subasta.precio_base %>
              </span>
              <div class="card-button">
                <a href="/subasta/<%= subasta.id %>" class="button">
                  <span class="button-text">Detalles</span>
                </a>
              </div>
            </div>

          </div>
          <% }) %>
      </div>

      <div class="verMas d-flex justify-content-center">
        <a href="/catalogo" class="cssbuttons-io-button">
          Ver más subastas
          <div class="icon">
            <svg height="24" width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path d="M0 0h24v24H0z" fill="none"></path>
              <path d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z"
                fill="currentColor"></path>
            </svg>
          </div>
        </a>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <img class="img_footer" src="/img/footer.png" alt="">
    <div class="contenedor_superior">
      <div class="contet_footer">
        <img class="img_logo" src="/img/SUBASTA-SUR-COLOR-ROJO-SIN-FONDO.png" alt="">
        <div class="redes_footer">
          <a href="">
            <img src="/img/face_footer.svg" alt="">
          </a>
          <a href="">
            <img src="/img/whatsapp_footer.svg" alt="">
          </a>
        </div>
        <a href="/admin/LoginAdminV" class="subastar">Quieres subastar tus veiculos <span>Click</span></a>
        <p>COPYRIGHT @ SUBASTAS.COM 2024</p>
      </div>
    </div>

  </footer>


  <!-- SCRIPTS -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const botonActivar = document.getElementById("btn_menu");
      const botonCerrar = document.getElementById("btn_close");
      const contenederMenu = document.getElementsByClassName("menu_desplegable")[0];

      botonActivar.addEventListener('click', () => {
        contenederMenu.classList.add("active");
      });

      botonCerrar.addEventListener('click', () => {
        contenederMenu.classList.remove("active");
      });
    });
  </script>

  <!-- <script>
    let currentSlide = 0;
    const slides = document.querySelectorAll('.comentario');
    const totalSlides = slides.length;
    const container = document.querySelector('.comentarios-container');

    document.getElementById('next').addEventListener('click', nextSlide);
    document.getElementById('back').addEventListener('click', prevSlide);

    function showSlide(index) {
      if (index >= totalSlides) {
        currentSlide = 0;
      } else if (index < 0) {
        currentSlide = totalSlides - 1;
      } else {
        currentSlide = index;
      }
      container.style.transform = 'translateX(' + (-currentSlide * 100) + '%)';
    }

    function nextSlide() {
      showSlide(currentSlide + 1);
      console.log("adelanta");

    }

    function prevSlide() {
      showSlide(currentSlide - 1);
      console.log("atras");

    }

    // Autoplay
    let autoPlayInterval = setInterval(nextSlide, 3000);

    // Pause autoplay on hover
    document.querySelector('.Testimonio').addEventListener('mouseover', () => {
      clearInterval(autoPlayInterval);
    });

    document.querySelector('.Testimonio').addEventListener('mouseout', () => {
      autoPlayInterval = setInterval(nextSlide, 3000);
    });
  </script> -->

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <script>
    $(document).ready(function () {
      $(".like-button").on("click", function () {
        const $button = $(this);
        const subastaId = $button.data("subasta-id");

        // Enviar una solicitud al servidor para guardar el estado del like
        $.post("/like", {
          subasta_id: subastaId
        }, function (response) {
          if (response.success) {
            // Alternar la visibilidad de los íconos
            $button.find(".bi-heart-fill").toggleClass("d-none");
            $button.find(".bi-heart").toggleClass("d-none");
          } else if (response.redirect) {
            // Redirigir al usuario a la página de inicio de sesión
            window.location.href = response.redirect;
          } else {
            alert("Error al realizar la acción.");
          }
        }).fail(function (jqXHR) {
          if (jqXHR.status === 401) {
            // Redirigir al usuario a la página de inicio de sesión
            window.location.href = jqXHR.responseJSON.redirect;
          } else {
            alert("Error al realizar la acción.");
          }
        });
      });
    });
  </script>
</body>

</html>