<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="/img/footer_logo.svg" type="image/x-icon">
  <title>Registro</title>
  <link rel="stylesheet" href="/css/slyle_register.css"> <!-- Ajusta la ruta según tu estructura de archivos -->
  <!-- BOOTSTRAP -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <!-- BOOTSTRAP ICON -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>

<body>
  <div class="contenedor_general">
    <div class="contenedor_general_a">
      <div class="banner_registro d-flex justify-content-center align-items-center flex-column">
        <h1>Bienvenido</h1>
        <p> Podrás ver todos los detalles de las propiedades y participar en las subastas activas.</p>
        <div class="tipo_persona">
          <button class="btn_persona_natural" onclick="PersonaNatural()">Persona natural</button>
          <button type="button" onclick="PersonaJuridica()">Persona juridica</button>
        </div>
        <p class="login">
          Ya me encuentro registrado
          <a href="/login">Iniciar sesion</a>
        </p>
      </div>
      <div class="contenedor_de_datos d-flex flex-column align-items-center">
        <div class="titulo">
          <h2>Crea una cuenta Subasta Sur</h2>
        </div>
        <div class="navegador d-flex justify-content-center flex-row">
          <div class="nav_datos uno active" id="step-1">
            <p>1</p>
          </div>
          <div class="nav_datos dos" id="step-2">
            <p>2</p>
          </div>
          <div class="nav_datos tres" id="step-3">
            <p>3</p>
          </div>
        </div>

        <!-- FORM PERSONA NATURAL -->
        <div class="contenedor_datos_natural d-flex flex-column align-items-center d-block" id="persNatural">
          <form action="/registro" method="post" id="formularioRegistro">
            <input type="hidden" name="tipo_persona" value="natural">

            <!-- Paso 1: Datos Personales -->
            <div class="datos_personales step active">
              <h5>Datos Personales Persona Natural</h5>
              <div class="espacioT nombre row">
                <div class="col">
                  <input type="text" name="nombre_apellidos" placeholder="Nombre y Apellidos" id="input_nombre">
                  <span id="nombreError" class="error-message"></span> <!-- Mensaje de error para Nombre -->
                </div>
                <div class="col">
                  <input type="text" name="dni_ce" placeholder="DNI-número verificador" id="input_dni">
                  <span id="dniError" class="error-message"></span> <!-- Mensaje de error para DNI -->
                </div>
              </div>

              <div class="espacioT email row">
                <div class="col">
                  <input type="email" name="email" placeholder="Email" id="email">
                  <span id="emailError" class="error-message"></span> <!-- Mensaje de error para Email -->
                </div>
                <div class="col">
                  <input type="email" name="confirmacion_email" placeholder="Confirmación Email"
                    id="confirmacion_email">
                  <span id="confirmacion_emailError" class="error-message"></span>
                  <!-- Mensaje de error para Confirmación Email -->
                </div>
              </div>

              <div class="espacioT sexo_fecha row">
                <div class="col">
                  <input type="date" name="fecha_nacimiento" placeholder="Fecha de Nacimiento" id="fecha_nacimiento">
                  <span id="fechaNacimientoError" class="error-message"></span>
                  <!-- Mensaje de error para Fecha de Nacimiento -->
                </div>
                <div class="col">
                  <select name="sexo" id="sexo">
                    <option value="">Seleccionar Sexo</option>
                    <option value="M">Masculino</option>
                    <option value="F">Femenino</option>
                  </select>
                  <span id="sexoError" class="error-message"></span> <!-- Mensaje de error para Sexo -->
                </div>
                <div class="col">
                  <select name="estado_civil" id="estado_civil">
                    <option value="">Estado Civil</option>
                    <option value="soltero">Soltero(a)</option>
                    <option value="casado">Casado(a)</option>
                    <option value="divorciado">Divorciado(a)</option>
                    <option value="viudo">Viudo(a)</option>
                  </select>
                  <span id="estadoCivilError" class="error-message"></span> <!-- Mensaje de error para Estado Civil -->
                </div>
              </div>

              <div class="espacioT celular row">
                <div class="col">
                  <input type="tel" name="celular" placeholder="Celular" id="celular">
                  <span id="celularError" class="error-message"></span> <!-- Mensaje de error para Celular -->
                </div>
                <div class="col">
                  <input type="tel" name="telefono" placeholder="Teléfono" id="telefono">
                  <span id="telefonoError" class="error-message"></span> <!-- Mensaje de error para Teléfono -->
                </div>
              </div>

              <div class="botones">
                <button type="button" onclick="validateForm()">Siguiente <i
                    class="bi bi-chevron-double-right"></i></button>
              </div>
            </div>

            <!-- Paso 2: Dirección -->
            <div class="datos_direccion step">
              <h5>Dirección</h5>
              <div class="row espacioT">
                <input class="col" type="text" name="departamento" placeholder="Departamento">
                <input class="col" type="text" name="provincia" placeholder="Provincia">
              </div>
              <div class="row espacioT">
                <input class="col-4" type="text" name="distrito" placeholder="Distrito">
                <input class="col" type="text" name="direccion" placeholder="Dirección">
              </div>
              <div class="row espacioT">
                <input class="col-3" type="text" name="numero" placeholder="Número">
                <input class="col" type="text" name="complemento" placeholder="Complemento (piso, dpto, manzana, etc)">
              </div>
              <div class="botones">
                <button class="previous-step" onclick="previousStep(0)">Anterior</button>
                <button class="next-step" onclick="nextStep(2)">Siguiente</button>

              </div>
            </div>

            <!-- Paso 3: Datos de Acceso -->
            <div class="datos_acceso step">
              <h5>Datos de Acceso</h5>
              <div class="col espacioI mt-4">
                <input class="row" type="text" name="usuario" placeholder="Usuario">
                <input class="row" id="contraseña" type="password" name="contraseña" placeholder="Contraseña">
                <div id="campoOK" class="error-message"></div>
              </div>
              <div class="terminoss d-flex">
                <input type="checkbox" name="terminos_y_condiciones" id="terminos_y_condiciones" value="1" required>
                <label for="terminos_y_condiciones">
                  He leído, conozco las condiciones para el tratamiento de mis datos personales y doy
                  mi consentimiento, tal y como se describe en
                  <a target="_blank" href="#">nuestros términos de uso</a>
                </label>
              </div>
              <div class="botones">
                <button type="button" onclick="previousStep(1)">
                  <i class="bi bi-chevron-double-left"></i> Anterior
                </button>
                <button type="submit" id="registroForm">Finalizar</button>
              </div>
            </div>
          </form>
        </div>

        <!-- FORM PERSONA JURIDICA -->
        <div class="contenedor_datos_juridica d-none" id="persJuridica">
          <form action="/registro" method="post" id="formularioRegistro">
            <input type="hidden" name="tipo_persona" value="juridica">
            <div class="datos-personales step_j active">
              <h5>Datos Personales Persona Juridica</h5>
              <div class="espacioT row">
                <input class="col" type="email" name="email" placeholder="Email" id="emailJuridico">
                <span id="emailJuridicoError" class="error-message"></span>
                <input class="col" type="email" name="confirmacion_email" placeholder="Confirmacion Email"
                  id="confirmacion_emailJuridico">
                <span id="confirmacion_emailJuridicoError" class="error-message"></span>
              </div>
              <div class="espacioT row">
                <input class="col" type="text" name="ruc" placeholder="RUC" id="input_ruc">
                <span id="rucError" class="error-message"></span>
                <input class="col" type="text" name="nombre_comercial" placeholder="Nombre Comercial">
              </div>
              <div class="espacioT row">
                <input class="col" type="text" name="actividad_comercial" placeholder="Actividad Comercial">
              </div>
              <div class="espacioT row">
                <input class="col" type="tel" name="celular" placeholder="Celular">
                <input class="col" type="tel" name="telefono" placeholder="Telefono">
              </div>
              <div class="botones">
                <button type="button" onclick="nextStepJ(1)">
                  Siguiente <i class="bi bi-chevron-double-right"></i>
                </button>
              </div>
            </div>
            <div class="datos_direccion step_j">
              <h5>Direccion</h5>
              <div class="espacioT row">
                <input class="col" type="text" name="departamento" placeholder="Departamento">
                <input class="col" type="text" name="provincia" placeholder="Provincia">
              </div>
              <div class="espacioT row">
                <input class="col" type="text" name="distrito" placeholder="Distrito">
                <input class="col" type="text" name="direccion" placeholder="Direccion">
              </div>
              <div class="espacioT row">
                <input class="col-3" type="text" name="numero" placeholder="Numero">
                <input class="col" type="text" name="complemento" placeholder="Complemento (piso, dpto, manzana, etc)">
              </div>
              <div class="botones">
                <button type="button" onclick="nextStepJ(2)">
                  Siguiente <i class="bi bi-chevron-double-right"></i>
                </button>
              </div>
            </div>
            <div class="datos_acceso step_j">
              <h5>Datos de acceso</h5>
              <div class="col espacioI mt-4">
                <input class="row" type="text" name="usuario" placeholder="Usuario">
                <input class="row" type="password" name="contraseña" placeholder="Contraseña">
              </div>
              <div class="terminoss d-flex">
                <input type="checkbox" name="terminos_y_condiciones" id="terminos_y_condiciones" value="1" required>
                <label for="terminos_y_condiciones">
                  He leído, conozco las condiciones para el tratamiento de mis datos personales y doy
                  mi consentimiento, tal y como se describe en
                  <a target="_blank" href="#">nuestros términos de uso</a>
                </label>
              </div>
              <div class="boton_final">
                <button type="submit"> Finalizar</button>
              </div>
            </div>
          </form>
        </div>


      </div>
    </div>
  </div>


  <!-- <script>
    document.querySelectorAll('form').forEach(form => {
      form.addEventListener('submit', function (event) {
        let valid = true;

        // Validación del DNI
        const dni = document.querySelector('#input_dni') ? document.querySelector('#input_dni').value : '';
        const dniError = document.querySelector('#dniError');
        if (dni && !isValidDNI(dni)) {
          dniError.textContent = 'DNI inválido.';
          valid = false;
        } else {
          dniError.textContent = '';
        }

        // Validación del RUC
        const ruc = document.querySelector('#input_ruc') ? document.querySelector('#input_ruc').value : '';
        const rucError = document.querySelector('#rucError');
        if (ruc && !isValidRUC(ruc)) {
          rucError.textContent = 'RUC inválido.';
          valid = false;
        } else {
          rucError.textContent = '';
        }

        // Validación del email
        const email = document.querySelector('#email') ? document.querySelector('#email').value : '';
        const confirmacion_email = document.querySelector('#confirmacion_email') ? document.querySelector('#confirmacion_email').value : '';
        const emailError = document.querySelector('#emailError');
        const confirmacion_emailError = document.querySelector('#confirmacion_emailError');
        if (email && !isValidEmail(email)) {
          emailError.textContent = 'Email inválido.';
          valid = false;
        } else {
          emailError.textContent = '';
        }
        if (confirmacion_email && email !== confirmacion_email) {
          confirmacion_emailError.textContent = 'Los emails no coinciden.';
          valid = false;
        } else {
          confirmacion_emailError.textContent = '';
        }

        // Validación del nombre y apellidos
        const nombre = document.querySelector('#input_nombre') ? document.querySelector('#input_nombre').value : '';
        const apellidos = document.querySelector('#input_apellidos') ? document.querySelector('#input_apellidos').value : '';
        const nombreError = document.querySelector('#nombreError');
        const apellidosError = document.querySelector('#apellidosError');
        if (nombre && /\d/.test(nombre)) {
          nombreError.textContent = 'El nombre no debe contener números.';
          valid = false;
        } else {
          nombreError.textContent = '';
        }
        if (apellidos && /\d/.test(apellidos)) {
          apellidosError.textContent = 'Los apellidos no deben contener números.';
          valid = false;
        } else {
          apellidosError.textContent = '';
        }

        // Validación de la fecha de nacimiento
        const fechaNacimiento = document.querySelector('#fecha_nacimiento') ? document.querySelector('#fecha_nacimiento').value : '';
        const fechaNacimientoError = document.querySelector('#fechaNacimientoError');
        if (fechaNacimiento && !isMayorDeEdad(fechaNacimiento)) {
          fechaNacimientoError.textContent = 'Debes ser mayor de edad.';
          valid = false;
        } else {
          fechaNacimientoError.textContent = '';
        }

        if (!valid) {
          event.preventDefault();
          alert('Por favor, corrige los errores antes de continuar.');
        }
      });
    });

    function isValidDNI(dni) {
      return /^\d{8}$/.test(dni); // Validación simple para 8 dígitos
    }

    function isValidRUC(ruc) {
      return /^\d{11}$/.test(ruc); // Validación simple para 11 dígitos
    }

    function isValidEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(email);
    }

    function isMayorDeEdad(fecha) {
      const hoy = new Date();
      const fechaNacimiento = new Date(fecha);
      const edad = hoy.getFullYear() - fechaNacimiento.getFullYear();
      const mes = hoy.getMonth() - fechaNacimiento.getMonth();
      if (mes < 0 || (mes === 0 && hoy.getDate() < fechaNacimiento.getDate())) {
        edad--;
      }
      return edad >= 18;
    }
  </script> -->

  <script src="/js/validador_n,.js" defer></script>



  <!-- SCRIPTS -->
  <script>
    function PersonaNatural() {
      const contDivNatural = document.getElementById('persNatural');
      const contDivJuridica = document.getElementById('persJuridica');

      contDivNatural.classList.add('d-block');
      contDivNatural.classList.remove('d-none');
      contDivJuridica.classList.add('d-none');
      contDivJuridica.classList.remove('d-block');

      // Reiniciar el formulario de persona natural al primer paso
      resetFormulario();
      nextStep(0);
    }

    function PersonaJuridica() {
      console.log("Cambiando a Persona Jurídica"); // Para verificar si se llama la función
      const contDivNatural = document.getElementById('persNatural');
      const contDivJuridica = document.getElementById('persJuridica');

      contDivNatural.classList.add('d-none');
      contDivNatural.classList.remove('d-block');
      contDivJuridica.classList.add('d-block');
      contDivJuridica.classList.remove('d-none');

      resetFormulario();
      //nextStepJ(0);
    }

    function resetFormulario() {
      // Limpiar los campos del formulario
      document.getElementById('formularioRegistro').reset();
    }


  </script>

  <script>
    document.getElementById('contraseña').addEventListener('input', function (evt) {
      const campo = evt.target;
      const valido = document.getElementById('campoOK');

      // Definir las expresiones regulares
      const regexMayusculas = /[A-ZÁÉÍÓÚÜÑ]/;
      const regexMinusculas = /[a-záéíóúüñ]/;
      const regexNumeros = /\d/;
      const regexCaracteresEspeciales = /[!@#$%^&*(),.?":{}|<>]/;

      // Obtener el valor del campo
      const valor = campo.value;

      // Verificar cada criterio
      const mensajes = [];
      if (!regexMayusculas.test(valor)) {
        mensajes.push("Debe contener al menos una letra mayúscula.");
      }
      if (!regexMinusculas.test(valor)) {
        mensajes.push("Debe contener al menos una letra minúscula.");
      }
      if (!regexNumeros.test(valor)) {
        mensajes.push("Debe contener al menos un número.");
      }
      if (!regexCaracteresEspeciales.test(valor)) {
        mensajes.push("Debe contener al menos un carácter especial.");
      }

      // Mostrar los mensajes
      if (mensajes.length > 0) {
        valido.innerHTML = mensajes.join('<br>');
      } else {
        valido.innerText = "Contraseña válida, ¡no la olvides!.";
      }
    });
  </script>
</body>

</html>